{"version":3,"file":"index.es.js","sources":["../src/TodoListElement/TodoListElement.styles.ts","../../../../node_modules/clsx/dist/clsx.m.js","../src/TodoListElement/TodoListElement.tsx","../src/ToolbarList/ToolbarList.tsx"],"sourcesContent":["import { createStyles } from '@udecode/plate-styled-components';\nimport tw from 'twin.macro';\nimport { TodoListElementStyleProps } from './TodoListElement.types';\n\nexport const getTodoListElementStyles = (props: TodoListElementStyleProps) => {\n  return createStyles(\n    { prefixClassNames: 'TodoListElement', ...props },\n    {\n      root: tw`flex flex-row py-1`,\n      ...(props.checked && { rootChecked: {} }),\n      checkboxWrapper: tw`flex items-center justify-center select-none mr-1.5`,\n      checkbox: tw`w-4 h-4 m-0`,\n      text: [\n        tw`flex-1 focus:outline-none`,\n        props.checked && tw`line-through opacity[0.666]`,\n      ],\n    }\n  );\n};\n","function toVal(mix) {\n\tvar k, y, str='';\n\n\tif (typeof mix === 'string' || typeof mix === 'number') {\n\t\tstr += mix;\n\t} else if (typeof mix === 'object') {\n\t\tif (Array.isArray(mix)) {\n\t\t\tfor (k=0; k < mix.length; k++) {\n\t\t\t\tif (mix[k]) {\n\t\t\t\t\tif (y = toVal(mix[k])) {\n\t\t\t\t\t\tstr && (str += ' ');\n\t\t\t\t\t\tstr += y;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfor (k in mix) {\n\t\t\t\tif (mix[k]) {\n\t\t\t\t\tstr && (str += ' ');\n\t\t\t\t\tstr += k;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn str;\n}\n\nexport default function () {\n\tvar i=0, tmp, x, str='';\n\twhile (i < arguments.length) {\n\t\tif (tmp = arguments[i++]) {\n\t\t\tif (x = toVal(tmp)) {\n\t\t\t\tstr && (str += ' ');\n\t\t\t\tstr += x\n\t\t\t}\n\t\t}\n\t}\n\treturn str;\n}\n","import React from 'react';\nimport { setNodes } from '@udecode/plate-common';\nimport { TElement, useEditorRef } from '@udecode/plate-core';\nimport { TodoListItemNodeData } from '@udecode/plate-list';\nimport clsx from 'clsx';\nimport { ReactEditor, useReadOnly } from 'slate-react';\nimport { getTodoListElementStyles } from './TodoListElement.styles';\nimport { TodoListElementProps } from './TodoListElement.types';\n\nexport const TodoListElement = (props: TodoListElementProps) => {\n  const {\n    attributes,\n    children,\n    nodeProps,\n    styles: _styles,\n    element,\n    classNames,\n    prefixClassNames,\n    ...rootProps\n  } = props;\n\n  const editor = useEditorRef();\n  const readOnly = useReadOnly();\n\n  const { checked } = element;\n\n  const styles = getTodoListElementStyles({ ...props, checked });\n\n  return (\n    <div\n      {...attributes}\n      css={styles.root.css}\n      {...rootProps}\n      className={clsx(\n        styles.root.className,\n        styles.rootChecked?.className,\n        rootProps?.className\n      )}\n    >\n      <div\n        contentEditable={false}\n        css={styles.checkboxWrapper?.css}\n        className={styles.checkboxWrapper?.className}\n      >\n        <input\n          data-testid=\"TodoListElementCheckbox\"\n          css={styles.checkbox?.css}\n          className={styles.checkbox?.className}\n          type=\"checkbox\"\n          checked={!!checked}\n          onChange={(e) => {\n            const path = ReactEditor.findPath(editor, element);\n\n            setNodes<TElement<TodoListItemNodeData>>(\n              editor,\n              { checked: e.target.checked },\n              {\n                at: path,\n              }\n            );\n          }}\n          {...nodeProps}\n        />\n      </div>\n      <span\n        css={styles.text?.css}\n        className={styles.text?.className}\n        contentEditable={!readOnly}\n        suppressContentEditableWarning\n      >\n        {children}\n      </span>\n    </div>\n  );\n};\n","import React from 'react';\nimport { getPreventDefaultHandler } from '@udecode/plate-common';\nimport { useEventEditorId, useStoreEditorState } from '@udecode/plate-core';\nimport { ELEMENT_UL, getListItemEntry, toggleList } from '@udecode/plate-list';\nimport { ToolbarButtonProps, ToolbarElement } from '@udecode/plate-toolbar';\n\nexport const ToolbarList = ({\n  type = ELEMENT_UL,\n  ...props\n}: ToolbarButtonProps & { type?: string }) => {\n  const editor = useStoreEditorState(useEventEditorId('focus'));\n\n  const res = !!editor?.selection && getListItemEntry(editor);\n\n  return (\n    <ToolbarElement\n      active={!!res && res.list[0].type === type}\n      type={type}\n      onMouseDown={\n        editor &&\n        getPreventDefaultHandler(toggleList, editor, {\n          type,\n        })\n      }\n      {...props}\n    />\n  );\n};\n"],"names":["getTodoListElementStyles","props","createStyles","prefixClassNames","root","checked","rootChecked","checkboxWrapper","checkbox","text","TodoListElement","attributes","children","nodeProps","styles","_styles","element","classNames","rootProps","editor","useEditorRef","readOnly","useReadOnly","clsx","className","css","e","path","ReactEditor","findPath","setNodes","target","at","ToolbarList","type","ELEMENT_UL","useStoreEditorState","useEventEditorId","res","selection","getListItemEntry","list","getPreventDefaultHandler","toggleList"],"mappings":"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"}