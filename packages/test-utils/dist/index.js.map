{"version":3,"file":"index.js","sources":["../src/getHtmlDocument.ts","../src/hyperscript/tokens.ts","../src/hyperscript/creators.ts","../src/jsx.ts"],"sourcesContent":["export const getHtmlDocument = (html: string) =>\n  new DOMParser().parseFromString(html, 'text/html');\n","// eslint-disable-next-line max-classes-per-file\nimport { Node, Path, Text } from 'slate';\n\n/**\n * A weak map to hold anchor tokens.\n */\n\nconst ANCHOR: WeakMap<Node, [number, AnchorToken]> = new WeakMap();\n\n/**\n * A weak map to hold focus tokens.\n */\n\nconst FOCUS: WeakMap<Node, [number, FocusToken]> = new WeakMap();\n\n/**\n * All tokens inherit from a single constructor for `instanceof` checking.\n */\n\nexport class Token {}\n\n/**\n * Anchor tokens represent the selection's anchor point.\n */\n\nexport class AnchorToken extends Token {\n  offset?: number;\n  path?: Path;\n\n  constructor(\n    props: {\n      offset?: number;\n      path?: Path;\n    } = {}\n  ) {\n    super();\n    const { offset, path } = props;\n    this.offset = offset;\n    this.path = path;\n  }\n}\n\n/**\n * Focus tokens represent the selection's focus point.\n */\n\nexport class FocusToken extends Token {\n  offset?: number;\n  path?: Path;\n\n  constructor(\n    props: {\n      offset?: number;\n      path?: Path;\n    } = {}\n  ) {\n    super();\n    const { offset, path } = props;\n    this.offset = offset;\n    this.path = path;\n  }\n}\n\n/**\n * Add an anchor token to the end of a text node.\n */\n\nexport const addAnchorToken = (text: Text, token: AnchorToken) => {\n  const offset = text.text.length;\n  ANCHOR.set(text, [offset, token]);\n};\n\n/**\n * Get the offset if a text node has an associated anchor token.\n */\n\nexport const getAnchorOffset = (\n  text: Text\n): [number, AnchorToken] | undefined => {\n  return ANCHOR.get(text);\n};\n\n/**\n * Add a focus token to the end of a text node.\n */\n\nexport const addFocusToken = (text: Text, token: FocusToken) => {\n  const offset = text.text.length;\n  FOCUS.set(text, [offset, token]);\n};\n\n/**\n * Get the offset if a text node has an associated focus token.\n */\n\nexport const getFocusOffset = (\n  text: Text\n): [number, FocusToken] | undefined => {\n  return FOCUS.get(text);\n};\n","import {\n  createEditor as makeEditor,\n  Descendant,\n  Editor,\n  Element,\n  Node,\n  Range,\n  Text,\n} from 'slate';\nimport {\n  addAnchorToken,\n  addFocusToken,\n  AnchorToken,\n  FocusToken,\n  getAnchorOffset,\n  getFocusOffset,\n  Token,\n} from './tokens';\n\n/**\n * Resolve the descedants of a node by normalizing the children that can be\n * passed into a hyperscript creator function.\n */\n\nconst STRINGS: WeakSet<Text> = new WeakSet();\n\nconst resolveDescendants = (children: any[]): Descendant[] => {\n  const nodes: Node[] = [];\n\n  const addChild = (child: Node | Token): void => {\n    if (child == null) {\n      return;\n    }\n\n    const prev = nodes[nodes.length - 1];\n\n    if (typeof child === 'string') {\n      const text = { text: child };\n      STRINGS.add(text);\n      child = text;\n    }\n\n    if (Text.isText(child)) {\n      const c = child; // HACK: fix typescript complaining\n\n      if (\n        Text.isText(prev) &&\n        STRINGS.has(prev) &&\n        STRINGS.has(c) &&\n        Text.equals(prev, c, { loose: true })\n      ) {\n        prev.text += c.text;\n      } else {\n        nodes.push(c);\n      }\n    } else if (Element.isElement(child)) {\n      nodes.push(child);\n    } else if (child instanceof Token) {\n      let n = nodes[nodes.length - 1];\n\n      if (!Text.isText(n)) {\n        addChild('');\n        n = nodes[nodes.length - 1] as Text;\n      }\n\n      if (child instanceof AnchorToken) {\n        addAnchorToken(n, child);\n      } else if (child instanceof FocusToken) {\n        addFocusToken(n, child);\n      }\n    } else {\n      throw new Error(`Unexpected hyperscript child object: ${child}`);\n    }\n  };\n\n  for (const child of children.flat(Infinity)) {\n    addChild(child);\n  }\n\n  return nodes;\n};\n\n/**\n * Create an anchor token.\n */\n\nexport function createAnchor(\n  tagName: string,\n  attributes: { [key: string]: any }\n): AnchorToken {\n  return new AnchorToken(attributes);\n}\n\n/**\n * Create an anchor and a focus token.\n */\n\nexport function createCursor(\n  tagName: string,\n  attributes: { [key: string]: any }\n): Token[] {\n  return [new AnchorToken(attributes), new FocusToken(attributes)];\n}\n\n/**\n * Create an `Element` object.\n */\n\nexport function createElement(\n  tagName: string,\n  attributes: { [key: string]: any },\n  children: any[]\n): Element {\n  return { ...attributes, children: resolveDescendants(children) };\n}\n\n/**\n * Create a focus token.\n */\n\nexport function createFocus(\n  tagName: string,\n  attributes: { [key: string]: any }\n): FocusToken {\n  return new FocusToken(attributes);\n}\n\n/**\n * Create a fragment.\n */\n\nexport function createFragment(\n  tagName: string,\n  attributes: { [key: string]: any },\n  children: any[]\n): Descendant[] {\n  return resolveDescendants(children);\n}\n\n/**\n * Create a `Selection` object.\n */\n\nexport function createSelection(\n  tagName: string,\n  attributes: { [key: string]: any },\n  children: any[]\n): Range {\n  const anchor: AnchorToken = children.find((c) => c instanceof AnchorToken);\n  const focus: FocusToken = children.find((c) => c instanceof FocusToken);\n\n  if (!anchor || !anchor.offset || !anchor.path) {\n    throw new Error(\n      `The <selection> hyperscript tag must have an <anchor> tag as a child with \\`path\\` and \\`offset\\` attributes defined.`\n    );\n  }\n\n  if (!focus || !focus.offset || !focus.path) {\n    throw new Error(\n      `The <selection> hyperscript tag must have a <focus> tag as a child with \\`path\\` and \\`offset\\` attributes defined.`\n    );\n  }\n\n  return {\n    anchor: {\n      offset: anchor.offset,\n      path: anchor.path,\n    },\n    focus: {\n      offset: focus.offset,\n      path: focus.path,\n    },\n    ...attributes,\n  };\n}\n\n/**\n * Create a `Text` object.\n */\n\nexport function createText(\n  tagName: string,\n  attributes: { [key: string]: any },\n  children: any[]\n): Text {\n  const nodes = resolveDescendants(children);\n\n  if (nodes.length > 1) {\n    throw new Error(\n      `The <text> hyperscript tag must only contain a single node's worth of children.`\n    );\n  }\n\n  let [node] = nodes;\n\n  if (node == null) {\n    node = { text: '' };\n  }\n\n  if (!Text.isText(node)) {\n    throw new Error(`\n    The <text> hyperscript tag can only contain text content as children.`);\n  }\n\n  // COMPAT: If they used the <text> tag we want to guarantee that it won't be\n  // merge with other string children.\n  STRINGS.delete(node);\n\n  Object.assign(node, attributes);\n  return node;\n}\n\n/**\n * Create a top-level `Editor` object.\n */\n\nexport function createEditor(\n  tagName: string,\n  attributes: { [key: string]: any },\n  children: any[]\n): Editor {\n  const otherChildren: any[] = [];\n  let selectionChild: Range | undefined;\n\n  for (const child of children) {\n    if (Range.isRange(child)) {\n      selectionChild = child;\n    } else {\n      otherChildren.push(child);\n    }\n  }\n\n  const descendants = resolveDescendants(otherChildren);\n  const selection: Partial<Range> = {};\n  const editor = makeEditor();\n  Object.assign(editor, attributes);\n  editor.children = descendants;\n\n  // Search the document's texts to see if any of them have tokens associated\n  // that need incorporated into the selection.\n  for (const [node, path] of Node.texts(editor)) {\n    const anchor = getAnchorOffset(node);\n    const focus = getFocusOffset(node);\n\n    if (anchor != null) {\n      const [offset] = anchor;\n      selection.anchor = { path, offset };\n    }\n\n    if (focus != null) {\n      const [offset] = focus;\n      selection.focus = { path, offset };\n    }\n  }\n\n  if (selection.anchor && !selection.focus) {\n    throw new Error(\n      `Slate hyperscript ranges must have both \\`<anchor />\\` and \\`<focus />\\` defined if one is defined, but you only defined \\`<anchor />\\`. For collapsed selections, use \\`<cursor />\\` instead.`\n    );\n  }\n\n  if (!selection.anchor && selection.focus) {\n    throw new Error(\n      `Slate hyperscript ranges must have both \\`<anchor />\\` and \\`<focus />\\` defined if one is defined, but you only defined \\`<focus />\\`. For collapsed selections, use \\`<cursor />\\` instead.`\n    );\n  }\n\n  if (selectionChild != null) {\n    editor.selection = selectionChild;\n  } else if (Range.isRange(selection)) {\n    editor.selection = selection;\n  }\n\n  return editor;\n}\n","import { createHyperscript } from 'slate-hyperscript';\nimport { createText } from './hyperscript/creators';\n\nconst ELEMENT_H1 = 'h1';\nconst ELEMENT_H2 = 'h2';\nconst ELEMENT_H3 = 'h3';\nconst ELEMENT_H4 = 'h4';\nconst ELEMENT_H5 = 'h5';\nconst ELEMENT_H6 = 'h6';\nconst ELEMENT_IMAGE = 'img';\nconst ELEMENT_LI = 'li';\nconst ELEMENT_LINK = 'a';\nconst ELEMENT_MEDIA_EMBED = 'media_embed';\nconst ELEMENT_MENTION = 'mention';\nconst ELEMENT_MENTION_INPUT = 'mention_input';\nconst ELEMENT_OL = 'ol';\nconst ELEMENT_PARAGRAPH = 'p';\nconst ELEMENT_TABLE = 'table';\nconst ELEMENT_TD = 'td';\nconst ELEMENT_TH = 'th';\nconst ELEMENT_TODO_LI = 'action_item';\nconst ELEMENT_TR = 'tr';\nconst ELEMENT_UL = 'ul';\nconst ELEMENT_BLOCKQUOTE = 'blockquote';\nconst ELEMENT_CODE_BLOCK = 'code_block';\nconst ELEMENT_CODE_LINE = 'code_line';\nconst ELEMENT_LIC = 'lic';\nconst ELEMENT_EXCALIDRAW = 'excalidraw';\n\ndeclare global {\n  namespace JSX {\n    interface IntrinsicElements {\n      [key: string]: any;\n      editor: any;\n      mention: any;\n      TodoList: any;\n      inline: any;\n      htext: any;\n    }\n  }\n}\n\nconst voidChildren = [{ text: '' }];\n\nexport const jsx = createHyperscript({\n  elements: {\n    ha: { type: ELEMENT_LINK },\n    hblockquote: { type: ELEMENT_BLOCKQUOTE },\n    hcodeblock: { type: ELEMENT_CODE_BLOCK },\n    hcodeline: { type: ELEMENT_CODE_LINE },\n    hexcalidraw: { type: ELEMENT_EXCALIDRAW },\n    hh1: { type: ELEMENT_H1 },\n    hh2: { type: ELEMENT_H2 },\n    hh3: { type: ELEMENT_H3 },\n    hh4: { type: ELEMENT_H4 },\n    hh5: { type: ELEMENT_H5 },\n    hh6: { type: ELEMENT_H6 },\n    himg: { type: ELEMENT_IMAGE, children: voidChildren },\n    hli: { type: ELEMENT_LI },\n    hmention: { type: ELEMENT_MENTION, children: voidChildren },\n    hmentioninput: {\n      type: ELEMENT_MENTION_INPUT,\n      children: voidChildren,\n    },\n    hmediaembed: { type: ELEMENT_MEDIA_EMBED, children: voidChildren },\n    hol: { type: ELEMENT_OL },\n    hp: { type: ELEMENT_PARAGRAPH },\n    htable: { type: ELEMENT_TABLE },\n    htd: { type: ELEMENT_TD },\n    hth: { type: ELEMENT_TH },\n    htodoli: { type: ELEMENT_TODO_LI },\n    htr: { type: ELEMENT_TR },\n    hul: { type: ELEMENT_UL },\n    hdefault: { type: ELEMENT_PARAGRAPH },\n    hlic: { type: ELEMENT_LIC },\n  },\n  creators: {\n    htext: createText,\n  },\n});\n"],"names":["getHtmlDocument","html","DOMParser","parseFromString","ANCHOR","WeakMap","FOCUS","Token","AnchorToken","constructor","props","offset","path","FocusToken","addAnchorToken","text","token","length","set","getAnchorOffset","get","addFocusToken","getFocusOffset","STRINGS","WeakSet","resolveDescendants","children","nodes","addChild","child","prev","add","Text","isText","c","has","equals","loose","push","Element","isElement","n","Error","flat","Infinity","createAnchor","tagName","attributes","createCursor","createElement","createFocus","createFragment","createSelection","anchor","find","focus","createText","node","delete","Object","assign","createEditor","otherChildren","selectionChild","Range","isRange","descendants","selection","editor","makeEditor","Node","texts","ELEMENT_H1","ELEMENT_H2","ELEMENT_H3","ELEMENT_H4","ELEMENT_H5","ELEMENT_H6","ELEMENT_IMAGE","ELEMENT_LI","ELEMENT_LINK","ELEMENT_MEDIA_EMBED","ELEMENT_MENTION","ELEMENT_MENTION_INPUT","ELEMENT_OL","ELEMENT_PARAGRAPH","ELEMENT_TABLE","ELEMENT_TD","ELEMENT_TH","ELEMENT_TODO_LI","ELEMENT_TR","ELEMENT_UL","ELEMENT_BLOCKQUOTE","ELEMENT_CODE_BLOCK","ELEMENT_CODE_LINE","ELEMENT_LIC","ELEMENT_EXCALIDRAW","voidChildren","jsx","createHyperscript","elements","ha","type","hblockquote","hcodeblock","hcodeline","hexcalidraw","hh1","hh2","hh3","hh4","hh5","hh6","himg","hli","hmention","hmentioninput","hmediaembed","hol","hp","htable","htd","hth","htodoli","htr","hul","hdefault","hlic","creators","htext"],"mappings":"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"}