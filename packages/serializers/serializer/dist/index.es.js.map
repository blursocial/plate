{"version":3,"file":"index.es.js","sources":["../src/insertDeserializedFragment.ts","../src/queries/isDeserializerEnabled.ts"],"sourcesContent":["import { PlatePlugin, SPEditor, TDescendant } from '@udecode/plate-core';\nimport { Editor } from 'slate';\nimport { ReactEditor } from 'slate-react';\n\nexport const insertDeserializedFragment = <\n  T extends SPEditor = SPEditor & ReactEditor\n>(\n  editor: T,\n  {\n    fragment,\n    plugins,\n  }: {\n    fragment: TDescendant[];\n    plugins: PlatePlugin<T>[];\n  }\n) => {\n  Editor.withoutNormalizing(editor, () => {\n    plugins.forEach(({ deserialize }) => {\n      const getFragment = deserialize?.(editor).getFragment;\n      if (!getFragment) return;\n\n      fragment = getFragment(fragment);\n    });\n\n    if (!fragment.length) return;\n\n    plugins.some(({ deserialize }) => {\n      return deserialize?.(editor).preInsert?.(fragment) === true;\n    });\n    editor.insertFragment(fragment);\n  });\n};\n","import { PlatePlugin, SPEditor } from '@udecode/plate-core';\n\nexport const isDeserializerEnabled = <TEditor extends SPEditor = SPEditor>(\n  editor: TEditor,\n  plugins: PlatePlugin<TEditor>[],\n  deserializerId: string\n) =>\n  plugins.every(\n    ({ deserialize }) => !deserialize?.(editor).isDisabled?.(deserializerId)\n  );\n"],"names":["insertDeserializedFragment","editor","fragment","plugins","Editor","withoutNormalizing","forEach","deserialize","getFragment","length","some","preInsert","insertFragment","isDeserializerEnabled","deserializerId","every","isDisabled"],"mappings":";;MAIaA,0BAA0B,GAAG,CAGxCC,MAHwC,EAIxC;AACEC,EAAAA,QADF;AAEEC,EAAAA;AAFF,CAJwC,KAWrC;AACHC,EAAAA,MAAM,CAACC,kBAAP,CAA0BJ,MAA1B,EAAkC,MAAM;AACtCE,IAAAA,OAAO,CAACG,OAAR,CAAgB,CAAC;AAAEC,MAAAA;AAAF,KAAD,KAAqB;AACnC,YAAMC,WAAW,GAAGD,WAAH,aAAGA,WAAH,uBAAGA,WAAW,CAAGN,MAAH,CAAX,CAAsBO,WAA1C;AACA,UAAI,CAACA,WAAL,EAAkB;AAElBN,MAAAA,QAAQ,GAAGM,WAAW,CAACN,QAAD,CAAtB;AACD,KALD;AAOA,QAAI,CAACA,QAAQ,CAACO,MAAd,EAAsB;AAEtBN,IAAAA,OAAO,CAACO,IAAR,CAAa,CAAC;AAAEH,MAAAA;AAAF,KAAD,KAAqB;AAAA;;AAChC,aAAO,CAAAA,WAAW,SAAX,IAAAA,WAAW,WAAX,qDAAAA,WAAW,CAAGN,MAAH,CAAX,EAAsBU,SAAtB,mGAAkCT,QAAlC,OAAgD,IAAvD;AACD,KAFD;AAGAD,IAAAA,MAAM,CAACW,cAAP,CAAsBV,QAAtB;AACD,GAdD;AAeD;;MC7BYW,qBAAqB,GAAG,CACnCZ,MADmC,EAEnCE,OAFmC,EAGnCW,cAHmC,KAKnCX,OAAO,CAACY,KAAR,CACE,CAAC;AAAER,EAAAA;AAAF,CAAD;AAAA;;AAAA,SAAqB,EAACA,WAAD,aAACA,WAAD,wCAAC,gBAAAA,WAAW,CAAGN,MAAH,CAAX,EAAsBe,UAAvB,kDAAC,yCAAmCF,cAAnC,CAAD,CAArB;AAAA,CADF;;;;"}